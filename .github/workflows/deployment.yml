name: Deployment

on:
  workflow_dispatch:
    inputs:
      deploy_env:
        description: 'target environment'
        required: true
        default: 'dev'

jobs:
  env_validation:
    runs-on: ubuntu-latest
    if: contains(['dev', 'demo', 'production'], github.event.inputs.deploy_env)
    steps:
      - name: validate env
        run: echo "validating input"
  deployment:
    needs: ['env_validation']
    runs-on: ubuntu-latest
    environment: ${{ github.event.inputs.deploy_env }}
    steps:
      - name: deploy
        run: echo "deploy ${{ github.event.inputs.deploy_env }}, ${{ github.event.inputs.secret_1 }}"
